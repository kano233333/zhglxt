<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="../../static/admin/css/index.css"/>
  <link rel="stylesheet" type="text/css" href="../../layuiadmin/layui/css/layui.css"/>
  <!--<script src="../../layuiadmin/layui/lay/modules/jquery.js" type="text/javascript" charset="utf-8"></script>-->
  <script src="../../static/admin/lib/echarts/echarts.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../layuiadmin/layui/layui.js" type="text/javascript" charset="utf-8"></script>
  <title></title>
  <style>
    * {
      padding:0;
      margin:0;
    }
    #my-canvas {
      background-color: #000000;
      position:relative;
      z-index:-1;
    }
    .body {
      position:fixed;
      top:0;
    }
  </style>
</head>
<body>
<canvas id="my-canvas"></canvas>
<div class="body">
  <div class="head">
    <img src="../../static/admin/images/ksh/title.png"/>
    <span>
					<div>
						<p class="nowtime"></p>
						<p class="temp"></p>
					</div>
				</span>
  </div>
  <div class="content">
    <div class="left">
      <div class="left_top">
        <div>
          <div class="title">
            <img src="../../static/admin/images/ksh/detail.png"/>
            <span class="head-name">
									党建情况统计
            </span>
          </div>
          <div class="text party">
            <div class="party-age">
              <div></div>
              <span>党龄</span>
            </div>
            <div class="party-edu">
              <div></div>
              <span>学历分布</span>
            </div>
          </div>
        </div>
      </div>
      <div class="left_middle">
        <div>
          <div class="title">
            <img src="../../static/admin/images/ksh/detail.png"/>
            <span class="head-name">
									社会组织统计
            </span>
          </div>
          <div class="text">
            <div class="society">
              <div class="so-data1"></div>
              <span name="so-name">
										商铺统计
									</span>
            </div>
            <div class="society">
              <div class="so-data2"></div>
              <span name="so-name">
										社会单位统计
									</span>
            </div>
          </div>
        </div>
      </div>
      <div class="left_foot">
        <div>
          <div class="title">
            <img src="../../static/admin/images/ksh/detail.png"/>
            <span class="head-name">
									人口年龄统计
								</span>
          </div>
          <div class="text age" style="width:100%;height:100%;">
          </div>
        </div>
      </div>
    </div>
    <div class="middle">
      <div class="map">
        <div>
							<span id="fullScr">
								<img src="../../static/admin/images/ksh/fullScr.png">
								<span>全屏</span>
							</span>
          <h4 id="map_title">地图</h4>
          <div id="event_box">
            <div class="c_title">待处理事件</div>
            <div id="ct" style="width:100%;height:100%;"></div>
          </div>
          <div class="maps">
            <iframe id="map_box" src="" width="100%" height="100%" frameborder="no"></iframe>
          </div>
        </div>
      </div>
      <div class="video">
        <div class="lastpage"></div>
        <div class="mid-video">
          <div id="v_first">
            <span></span>
          </div>
          <div id="v_second">
            <span></span>
          </div>
        </div>
        <div class="nextpage"></div>
      </div>
    </div>
    <div class="right">
      <div class="right_top">
        <div>
          <div class="title">
            <img src="../../static/admin/images/ksh/detail.png"/>
            <span class="head-name">
									诉求业务总量
								</span>
          </div>
          <div class="text">
            <div class="business">
									<span>
										<img src="../../static/admin/images/ksh/transferPop.png"/>
										<div class="tran-event">
											<p>转办事件</p>
											<p></p>
										</div>
									</span>
              <span>
										<img src="../../static/admin/images/ksh/visa.png"/>
										<div class="over-event">
											<p>办结案件</p>
											<p>2000</p>
										</div>
									</span>
            </div>
            <div class="business">
									<span>
										<div class="first-event">
											<p>一级事件</p>
											<p></p>
										</div>
									</span>
              <span>
										<div class="second-event">
											<p>二级事件</p>
											<p></p>
										</div>
									</span>
              <span>
										<div class="third-event">
											<p>三级事件</p>
											<p></p>
										</div>
									</span>
            </div>
          </div>
        </div>
      </div>
      <div class="right_middle">
        <div>
          <div class="title">
            <img src="../../static/admin/images/ksh/detail.png"/>
            <span class="head-name">
									事件处理情况
								</span>
          </div>
          <div class="text event-data"></div>
        </div>
      </div>
      <div class="right_foot">
        <div>
          <div class="title">
            <img src="../../static/admin/images/ksh/detail.png"/>
            <span class="head-name">
										网格信息统计
									</span>
          </div>
          <div class="text gridStatus"></div>
        </div>
      </div>
    </div>
  </div>
</div>
</body>
<script>
  var myCanvas = document.getElementById('my-canvas');
  var allW = document.documentElement.clientWidth;
  var allH = document.documentElement.clientHeight;
  myCanvas.width = allW;
  myCanvas.height = allH;

  var ctx  = myCanvas.getContext('2d');

  var ballArr = [];
  (function(){
    for(var i=0;i<300;i++){
      //创建指定个数小圆球
      new Ball();
    }
  })();
  //小圆球对象
  function Ball(){
    this.x = randomNum(0,allW);
    this.y = randomNum(0,allH);
    this.color = "rgba("+Math.random()*255+","+Math.random()*255+","+Math.random()*255+",0.3)";
    this.r = randomNum(1,4);
    var rand = Math.random();
    this.speedX = (Math.random()>0.5) ? rand : -rand;
    rand = Math.random();
    this.speedY = (Math.random()>0.5) ? rand : -rand;
    ballArr.push(this);
  }

  Ball.prototype.draw = function(){
    ctx.beginPath();
    ctx.fillStyle = this.color;
    ctx.arc(this.x,this.y,this.r,0,Math.PI*2);
    ctx.fill();
  }

  Ball.prototype.move = function(){
    this.x = this.x+this.speedX;
    this.y = this.y+this.speedY;

    if(this.x<=0 || this.x>=allW-20){
      this.speedX = -this.speedX;
    }

    if(this.y<=0 || this.y>=allH){
      this.speedY = -this.speedY;
    }
  }

  var timer = setInterval(function(){
    ctx.clearRect(0,0,allW,allH);
    for(var i = 0;i<ballArr.length;i++){
      ballArr[i].draw();
      ballArr[i].move();
    }
    ballLine();
  },20)

  //小圆球之间的连线
  function ballLine(){
    for(var i = 0;i<ballArr.length;i++){
      for(var j = 0;j<ballArr.length;j++){
        //距离
        if(i!=j && Math.sqrt(Math.pow(ballArr[i].x-ballArr[j].x,2)+Math.pow(ballArr[i].y-ballArr[j].y,2))<80){
          ctx.beginPath();
          ctx.moveTo(ballArr[i].x,ballArr[i].y);
          ctx.lineTo(ballArr[j].x,ballArr[j].y);
          ctx.strokeStyle = "rgba(255,255,255,0.1)";
          ctx.stroke();
        }
      }
    }
  }

  function randomNum(start,end){
    return Math.floor(Math.random()*(end-start)+start);
  }

</script>

<script>
  layui.use(['jquery'], function () {
    var $ = layui.jquery;
    var num_v = 0;
    $(function () {
      var data1 = {
        statusCode: 200,
        dataName: "人口年龄统计",
        data: [
          {
            name: "0-17岁(人)",
            value: 793
          },
          {
            name: "18-39岁(人)",
            value: 6235
          },
          {
            name: "40-59岁(人)",
            value: 3877
          },
          {
            name: "60-79岁(人)",
            value: 2572
          },
          {
            name: "80-99岁(人)",
            value: 361
          },
          {
            name: "100岁以上(人)",
            value: 4
          }
        ]
      };
      ssr1('.age', data1.data);
      var data2 = {
        statusCode: 200,
        dataName: "商铺统计",
        data: [
          {
            name: "超市",
            value: 8
          },
          {
            name: "药店",
            value: 12
          },
          {
            name: "健身房",
            value: 4
          }
        ]
      };
      ssr2('.so-data1', data2.data,'#8389ed');
      ssr2('.so-data2',data1.data,'#ed665d');
      ssr2('.party-age>div',data1.data,'#edb056');
      ssr2('.party-edu>div',data1.data,'#8eedeb');
      ssr1('#v_second>span',data1.data,"单位(件)");
      ssr6('.gridStatus',data1.data,data1.data);
      ssr6('#ct',data1.data,data1.data);
      ssr5("#v_first>span",data1.data);
      ssr7('.event-data',data1.data);
    })

    //柱图
    function ssr1(el, data, title) {
      var myChart = echarts.init(document.querySelector(el));
      var name = [],
        value = [],
        total = 0;
      data.forEach(function (val, i) {
        name[i] = val.name;
        value[i] = val.value;
        total += val.value;
      })
      if (!title) {
        title = '单位(人)'
      }
      myChart.clear();
      var xAxisData = [];
      var data1 = [];
      var data2 = [];
      for (var i = 0; i < 100; i++) {
        xAxisData.push('类目' + i);
        data1.push((Math.sin(i / 5) * (i / 5 -10) + i / 6) * 5);
        data2.push((Math.cos(i / 5) * (i / 5 -10) + i / 6) * 5);
      }
      option = {
        xAxis: {
          data: xAxisData,
          silent: false,
          splitLine: {
            show: false
          }
        },
        yAxis: {
        },
        series: [{
          name: 'bar',
          type: 'bar',
          data: data1,
          animationDelay: function (idx) {
            return idx * 10;
          }
        }, {
          name: 'bar2',
          type: 'bar',
          data: data2,
          animationDelay: function (idx) {
            return idx * 10 + 100;
          }
        }],
        animationEasing: 'elasticOut',
        animationDelayUpdate: function (idx) {
          return idx * 5;
        }
      };
      myChart.setOption(option);
      myChart.on('click', function (e) {
        console.log(e)
      });
      //防止调用太快
      var boor = true;

      function resizes() {
        boor = true;
        myChart.resize();
      }

      $(window).resize(function () {
        if (boor) {
          boor = false;
          setTimeout(resizes, 500);
        }
      })
    }

    //饼图
    function ssr2(el, data,color) {
      var myChart = echarts.init(document.querySelector(el));
      var name = [],
        value = [];
      data.forEach(function (val, i) {
        name[i] = val.name;
        value[i] = val.value;
      })
      myChart.clear();
      option = {
        title: {
          left: 'center',
          top: 20,
          textStyle: {
            color: '#ccc'
          }
        },

        tooltip : {
          trigger: 'item',
          formatter: "{a} <br/>{b} : {c} ({d}%)"
        },

        visualMap: {
          show: false,
          min: 100,
          max: 600,
          inRange: {
            colorLightness: [0, 1]
          }
        },
        series : [
          {
            name:'访问来源',
            type:'pie',
            radius : '55%',
            center: ['50%', '50%'],
            data:[
              {value:335, name:'直接访问'},
              {value:310, name:'邮件营销'},
              {value:274, name:'联盟广告'},
              {value:235, name:'视频广告'},
              {value:400, name:'搜索引擎'}
            ].sort(function (a, b) { return a.value - b.value; }),
            roseType: 'radius',
            label: {
              normal: {
                textStyle: {
                  color: 'rgba(255, 255, 255, 0.3)'
                }
              }
            },
            labelLine: {
              normal: {
                lineStyle: {
                  color: 'rgba(255, 255, 255, 0.3)'
                },
                smooth: 0.2,
                length: 5,
              }
            },
            itemStyle: {
              normal: {
                color: color,
                shadowBlur: 200,
                shadowColor: 'rgba(0, 0, 0, 0.5)'
              }
            },

            animationType: 'scale',
            animationEasing: 'elasticOut',
            animationDelay: function (idx) {
              return Math.random() * 200;
            }
          }
        ]
      };
      myChart.setOption(option);
      myChart.on('click', function (e) {
        console.log(e)
      });
      //防止调用太快
      var boor = true;

      function resizes() {
        boor = true;
        myChart.resize();
      }

      $(window).resize(function () {
        if (boor) {
          boor = false;
          setTimeout(resizes, 500);
        }
      })
    }

    //横轴柱图
    function ssr3(el, data) {
      var myChart = echarts.init(document.querySelector(el));
      var name = [],
        value = [],
        total = 0;
      data.forEach(function (val, i) {
        name[i] = val.name;
        value[i] = val.value;
        total += val.value;
      })
      myChart.clear();
      option = {
        legend: {
          show: false
        },
        tooltip: {
          trigger: 'item',
          show: true,
          formatter: function (res) {
            var text = res.name + ": <br/>" + res.value + "(" + (res.value * 100 / total).toFixed() + "%)"
            return text;
          }
        },
        yAxis: {
          type: 'category',
          data: function () {
            var datas = [],
              color = ['#3fc1e8', '#4285f4', '#54b7ff', '#3fe8ca', '#5aa5ff', '#0095ff', '#1c74b3', '#45ff8f', '#66fdff', '#50e9c1', '#313186', '#7e62fb', '#bb7ef1', '#004a81', '#e9aff3'];
            name.forEach(function (val, i) {
              datas[i] = {
                value: name[i],
                textStyle: {
                  fontSize: 10,
                  color: color[i]
                }
              }
            })
            return datas;
          }(),
          axisTick: {
            show: false,
            lineStyle: {
              color: '#0ff'
            },
          },
          axisLabel: {
            interval: 0,
            textStyle: {
              color: "#0ff",
              fontSize: 10,
            },
          }
        },
        xAxis: {
          type: 'value',
          splitLine: {
            show: false
          },
          axisTick: {
            show: true,
            lineStyle: {
              color: '#0ff'
            },
          },
          axisLabel: {
            textStyle: {
              color: "#0ff",
              fontSize: 10,
            },
          }
        },
        grid: {
          right: '20px',
          top: '0',
          left: '10px',
          bottom: '15px',
          containLabel: true
        },
        series: [{
          //name: str.dataName,
          type: 'bar',
          data: data,
          barMaxWidth: 20,
          label: {
            normal: {
              show: true,
              position: 'right',
              textStyle: {
                fontSize: 10
              }
            }
          },
          itemStyle: {
            normal: {
              color: function (params) {
                var colorList = ['#3fc1e8', '#4285f4', '#54b7ff', '#3fe8ca', '#5aa5ff', '#0095ff', '#1c74b3', '#45ff8f', '#66fdff', '#50e9c1', '#313186', '#7e62fb', '#bb7ef1', '#004a81', '#e9aff3'];
                return colorList[params.dataIndex];
              }
            }
          }
        }]
      };
      myChart.setOption(option);
      myChart.on('click', function (e) {
        console.log(e);
      });
      //防止调用太快
      var boor = true;

      function resizes() {
        boor = true;
        myChart.resize();
      }

      $(window).resize(function () {
        if (boor) {
          boor = false;
          setTimeout(resizes, 500);
        }
      })
    }

    //折线图
    function ssr4(el, online, offline) {
      var myChart = echarts.init(document.querySelector(el));
      var name = [],
        value = [],
        value1 = [],
        total = 0;
      online.forEach(function (val, i) {
        name[i] = val.name;
        value[i] = val.value;
        total += val.value;
      })
      offline.forEach(function (val, i) {
        value1[i] = val.value;
      })
      myChart.clear();
      option = {
        tooltip: {
          trigger: 'axis'
        },
        legend: {
          data: ['在线人数', '离线人数'],
          x: 'right',
          itemWidth: 18,
          itemHeight: 12,
          textStyle: {
            color: '#72d9e3'
          }
        },
        grid: {
          top: '35px',
          left: '20px',
          right: '10px',
          bottom: '5px',
          containLabel: true
        },
        xAxis: {
          type: 'category',
          data: name,
          axisTick: {
            show: false,
            lineStyle: {
              color: '#0ff'
            },
          },
          axisLabel: {
            interval: 0,
            rotate: 45,
            textStyle: {
              color: "#0ff",
              fontSize: 10,
            },
          },
          axisLine: {
            lineStyle: {
              color: "#72d9e3"
            }
          }
        },
        yAxis: {
          axisLine: {
            lineStyle: {
              color: "#72d9e3"
            }
          },
          type: 'value',
          splitLine: {
            show: false
          },
          axisTick: {
            show: true,
            lineStyle: {
              color: '#0ff'
            },
          },
          axisLabel: {
            textStyle: {
              color: "#0ff",
              fontSize: 10,
            },
          }
        },
        series: [
          {
            name: '在线人数',
            type: 'line',
            itemStyle: {
              color: "#3fc1e8"
            },
            label: {
              show: true,
              color: '#72d9e3'
            },
            data: online
          },
          {
            name: '离线人数',
            type: 'line',
            itemStyle: {
              color: "#4285f4"
            },
            label: {
              show: true,
              color: '#72d9e3'
            },
            data: offline
          }
        ]
      };
      myChart.setOption(option);
      myChart.on('click', function (e) {
        console.log(e);
      });
      //防止调用太快
      var boor = true;

      function resizes() {
        boor = true;
        myChart.resize();
      }

      $(window).resize(function () {
        if (boor) {
          boor = false;
          setTimeout(resizes, 500);
        }
      })
    }

    function ssr6(el, online, offline) {
      var myChart = echarts.init(document.querySelector(el));
      var name = [],
        value = [],
        value1 = [],
        total = 0;
      online.forEach(function (val, i) {
        name[i] = val.name;
        value[i] = val.value;
        total += val.value;
      })
      offline.forEach(function (val, i) {
        value1[i] = val.value;
      })
      myChart.clear();
      option = {
        tooltip : {
          trigger: 'axis',
          axisPointer: {
            type: 'cross',
            label: {
              backgroundColor: '#6a7985'
            }
          }
        },
        toolbox: {
          feature: {
            saveAsImage: {}
          }
        },
        grid: {
          left: '3%',
          right: '4%',
          bottom: '3%',
          containLabel: true
        },
        xAxis : [
          {
            type : 'category',
            boundaryGap : false,
            data : ['周一','周二','周三','周四','周五','周六','周日']
          }
        ],
        yAxis : [
          {
            type : 'value'
          }
        ],
        series : [
          {
            name:'邮件营销',
            type:'line',
            stack: '总量',
            areaStyle: {},
            data:[120, 132, 101, 134, 90, 230, 210]
          },
          {
            name:'联盟广告',
            type:'line',
            stack: '总量',
            areaStyle: {},
            data:[220, 182, 191, 234, 290, 330, 310]
          },
          {
            name:'视频广告',
            type:'line',
            stack: '总量',
            areaStyle: {},
            data:[150, 232, 201, 154, 190, 330, 410]
          },
          {
            name:'直接访问',
            type:'line',
            stack: '总量',
            areaStyle: {normal: {}},
            data:[320, 332, 301, 334, 390, 330, 320]
          },
          {
            name:'搜索引擎',
            type:'line',
            stack: '总量',
            label: {
              normal: {
                show: true,
                position: 'top'
              }
            },
            areaStyle: {normal: {}},
            data:[820, 932, 901, 934, 1290, 1330, 1320]
          }
        ]
      };
      myChart.setOption(option);
      myChart.on('click', function (e) {
        console.log(e);
      });
      //防止调用太快
      var boor = true;

      function resizes() {
        boor = true;
        myChart.resize();
      }

      $(window).resize(function () {
        if (boor) {
          boor = false;
          setTimeout(resizes, 500);
        }
      })
    }


    //走势图
    function ssr5(el, data) {
      var myChart = echarts.init(document.querySelector(el));
      var axisData = [],
        value = [];
      data.forEach(function (val, i) {
        axisData[i] = val.name.substring(5);
        value[i] = val.value;
      })

      var links = value.map(function (item, i) {
        return {
          source: i,
          target: i + 1
        };
      });
      links.pop();
      myChart.clear();
      option = {
        title: {
          text: '事件提交统计',
          x: 'center',
          y: '1%',
          textStyle: {
            fontSize: 16,
            color: '#0ff'
          }

        },
        tooltip: {},
        xAxis: {
          type: 'category',
          boundaryGap: true,
          data: axisData,
          axisTick: {
            show: true,
            lineStyle: {
              color: '#0ff'
            },
          },
          axisLabel: {
            interval: 0,
            textStyle: {
              color: "#0ff",
              fontSize: 10,
            },
          },
          axisLine: {
            lineStyle: {
              color: "#72d9e3"
            }
          }
        },
        grid: {
          left: '15px',
          top: '20px',
          right: '25px',
          bottom: '10px',
          containLabel: true
        },
        yAxis: {
          axisLine: {
            lineStyle: {
              color: "#72d9e3"
            }
          },
          type: 'value',
          splitLine: {
            show: false
          },
          axisTick: {
            show: true,
            lineStyle: {
              color: '#0ff'
            },
          },
          axisLabel: {
            textStyle: {
              color: "#0ff",
              fontSize: 10,
            },
          }
        },
        series: [
          {
            type: 'graph',
            layout: 'none',
            coordinateSystem: 'cartesian2d',
            symbolSize: 15,
            label: {
              normal: {
                show: false
              }
            },
            edgeSymbol: ['circle', 'arrow'],
            edgeSymbolSize: [4, 10],
            data: data,
            links: links,
            lineStyle: {
              normal: {
                color: '#0ff'
              }
            },
            itemStyle: {
              color: '#4892ff'
            }
          }
        ]
      };
      myChart.setOption(option);
      myChart.on('click', function (e) {
        console.log(e);
      });
      //防止调用太快
      var boor = true;

      function resizes() {
        boor = true;
        myChart.resize();
      }

      $(window).resize(function () {
        if (boor) {
          boor = false;
          setTimeout(resizes, 500);
        }
      })
    }

    function ssr7(el, data) {
      var myChart = echarts.init(document.querySelector(el));
      var name = [],
        value = [],
        total = 0;
      data.forEach(function (val, i) {
        name[i] = val.name;
        value[i] = val.value;
        total += val.value;
      })
      myChart.clear();
      option = {
        angleAxis: {
          type: 'category',
          data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
          z: 10
        },
        radiusAxis: {
        },
        polar: {
        },
        series: [{
          type: 'bar',
          data: [1, 2, 3, 4, 3, 5, 1],
          coordinateSystem: 'polar',
          name: 'A',
          stack: 'a'
        }, {
          type: 'bar',
          data: [2, 4, 6, 1, 3, 2, 1],
          coordinateSystem: 'polar',
          name: 'B',
          stack: 'a'
        }, {
          type: 'bar',
          data: [1, 2, 3, 4, 1, 2, 5],
          coordinateSystem: 'polar',
          name: 'C',
          stack: 'a'
        }]
      };
      myChart.setOption(option);
      myChart.on('click', function (e) {
        console.log(e);
      });
      //防止调用太快
      var boor = true;

      function resizes() {
        boor = true;
        myChart.resize();
      }

      $(window).resize(function () {
        if (boor) {
          boor = false;
          setTimeout(resizes, 500);
        }
      })
    }

  })
</script>
</html>
